```mermaid
graph TD
    A[Start: SqrtKeypointVio::process()] --> B{Is initialized?}
    
    B -- No --> C[Call vioInitialize()]
    C --> D{Initialization success?}
    D -- No --> E[Return empty SlamOutput]
    D -- Yes --> F[Set initialized = true]
    F --> G[Update timestamps: cur_t_ns_, prev_t_ns_]

    B -- Yes --> G

    G --> H[Build OpticalFlowResult from track/detect]
    H --> I[Call processImuMeas()]
    I --> J[Call processVisionMeas()]
    J --> K[Solve Optimization with Sliding Window]

    K --> L{Is keyframe?}
    L -- Yes --> M[Add Keyframe + Update IMU State]
    L -- No --> N[Skip Keyframe Update]

    M --> O[Update Landmark Database]
    N --> O

    O --> P[Generate SlamOutput]
    P --> Q[Return result]

```