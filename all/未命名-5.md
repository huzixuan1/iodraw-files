```mermaid
graph TD

  MemPool["MemPool(核心内存分配器)"]
  createBlockSizes["createBlockSizes(生成内存块配置)"]

  VariableMemPool["VariableMemPool(变量分配单例)"]
  FactorMemPool["FactorMemPool(因子分配单例)"]

  XR_MAKE_SHARED_VARIABLE["XR_MAKE_SHARED_VARIABLE(变量分配宏)"]
  XR_MAKE_SHARED_FACTOR["XR_MAKE_SHARED_FACTOR(因子分配宏)"]

  createBlockSizes --> VariableMemPool
  createBlockSizes --> FactorMemPool

  MemPool --> VariableMemPool
  MemPool --> FactorMemPool

  VariableMemPool --> XR_MAKE_SHARED_VARIABLE
  FactorMemPool --> XR_MAKE_SHARED_FACTOR

  XR_MAKE_SHARED_VARIABLE -->|调用 allocate<T>()| MemPool
  XR_MAKE_SHARED_FACTOR -->|调用 allocate<T>()| MemPool

```