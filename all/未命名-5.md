```mermaid
graph TD
%%   subgraph 内存池基础设施
    MemPool[MemPool核心内存分配器]
    createBlockSizes["createBlockSizes\n(生成内存块配置)"]
  end

  subgraph 变量内存池
    VariableMemPool["VariableMemPool\n(变量分配单例)"]
    XR_MAKE_SHARED_VARIABLE["XR_MAKE_SHARED_VARIABLE\n(变量分配宏)"]
  end

  subgraph 因子内存池
    FactorMemPool["FactorMemPool\n(因子分配单例)"]
    XR_MAKE_SHARED_FACTOR["XR_MAKE_SHARED_FACTOR\n(因子分配宏)"]
  end

  createBlockSizes --> VariableMemPool
  createBlockSizes --> FactorMemPool

  MemPool --> VariableMemPool
  MemPool --> FactorMemPool

  VariableMemPool --> XR_MAKE_SHARED_VARIABLE
  FactorMemPool --> XR_MAKE_SHARED_FACTOR

  XR_MAKE_SHARED_VARIABLE -->|调用 allocate<T>()| MemPool
  XR_MAKE_SHARED_FACTOR -->|调用 allocate<T>()| MemPool

```